<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<style>
		a{ display: block }
	</style>
</head>
<body>
	<a href="#abc@name=sam&score=8">hash #abc</a>
	<a href="#buke@name=buke&score=99">hash #buke</a>
	<a href="#moon@name=leon&score=68">hash #moon</a>

	<div id="app">
	
	</div>

	<div id="app2">
	
	</div>
	<!-- <script src="./src/struct.js"></script> -->
	<!-- <script src="./src/aix.js"></script> -->
	<script src="./dest/aix.c.js"></script>

	<script>
var model = new aix.model({
	data:{
		name:"cloudy",
		score:80
	},
	validate:{
		name:function(name){
			return name.length>3;
		}
	}
});

var view = new aix.view({
	root:"#app",
	template:"<div>name: {{-name}}</div>"+
					 "<div>score: {{-score}}</div>"
});

var model2 = new aix.model({
		data:[5,1,3,4,2,6]
});

var view2 = new aix.view({
	root:"#app2",
	template: "{{ var al = struct.op('array') }}"+
						"<ul>"+
						"{{ al(numbers,function(num){ }}"+
						"<li>{{#num}}</li>"+
						"{{ }) }}"+
						"</ul>"
});

model2.on("change",function(){
	view2.render({ numbers: model2.parse() });
});

view2.render({ numbers: model2.parse() });

var route = new aix.route({
	routes:{
		".":"ac"
	},
	actions:{
		ac:function(hash,param){
			model.set(param);
		}
	},
	events:{
		init:function(){
			view.render(model.parse());
		}
	}
});

model.on("change",view.render);
model.on("validate:fail",function(json){
	alert("name as: "+json.name+" length greater than 3");
});

route.listen();
	</script>
</body>
</html>
