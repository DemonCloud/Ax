!(function(t,e,n){if("function"==typeof define&&define.amd)define("ax",["struct"],(function(t){return n(e,t)}));else if("undefined"!=typeof exports){var r=require("struct");n(exports,r)}else t.ax=n(e,t._)})(this,{},(function(t,e){"use strict";function n(t){return function(e){return new t(ht(e)?e:{})}}function r(t){return function(e){var n=e;return function(e){return new t($t(n,ht(e)?e:{}))}}}function i(t){return t._zid||(t._zid=Gt++)}function o(t,e,n,r){if((e=a(e)).ns)var o=u(e.ns);return(Kt[i(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||o.test(t.ns))&&(!n||i(t.fn)===i(n))&&(!r||t.sel==r)}))}function a(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function u(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t,e){return t.del&&!Xt&&t.e in Ut||!!e}function c(t){var e=0;if(null!=t.selectionStart)e=t.selectionStart;else if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}return e}function l(t,e){if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else t.selectionStart?t.setSelectionRange(e,e,t.focus()):t.focus()}function f(t){return Yt[t]||Qt[t]||Zt[t]||Xt&&Ut[t]||t}function h(t,e,n,r,o,u,h){var d=i(t),p=Kt[d]||(Kt[d]=[]);wt(e.split(/\s/),(function(e){var i=a(e);i.fn=n,i.sel=o,i.e in Yt&&(n=function(t){var e=t.relatedTarget;if(!e||e!==this&&!this.contains(e))return i.fn.apply(this,arguments)}),i.del=u;var d=u||n;i.proxy=function(e){var n,i=e.type,o=e.target.nodeName,a="true"===e.target.contentEditable,u=jt(Wt,i)&&("INPUT"===o||"TEXTAREA"===o||a),s=new C.xEvent(e=v(e));if(e.isImmediatePropagationStopped()||u&&e.target._compositionIn)return!1;s.data=r,u&&(n=c(e.target));var f=d.apply(t,void 0===s._args?[s]:[s].concat(s._args));return!1===f&&(e.preventDefault(),e.stopPropagation()),n&&l(e.target,n),f},i.i=p.length,p.push(i);var m=f(i.e);m in Qt&&(t.addEventListener("compositionstart",(function(t){t.target._compositionIn=!0})),t.addEventListener("compositionend",(function(t){t.target._compositionIn=!1,C(t.target).trigger("input")}))),t.addEventListener(m,i.proxy,s(i,h))}))}function d(t,e,n,r,a){var u=i(t);wt((e||"").split(/\s/),(function(e){wt(o(t,e,n,r),(function(e){delete Kt[u][e.i],t.removeEventListener(f(e.e),e.proxy,s(e,a))}))}))}function p(){return!0}function m(){return!1}function v(t,e){if(e||!t.isDefaultPrevented){e||(e=t),wt(ee,(function(n,r){var i=e[r];t[r]=function(){return this[n]=p,i&&i.apply(e,arguments)},t[n]=m}));try{t.timeStamp||(t.timeStamp=Date.now())}catch(t){}(void 0!==e.defaultPrevented?e.defaultPrevented:"returnValue"in e?!1===e.returnValue:e.getPreventDefault&&e.getPreventDefault())&&(t.isDefaultPrevented=p)}return t}function g(t){var e,n={originalEvent:t};for(e in t)te.test(e)||void 0===t[e]||(n[e]=t[e]);return v(n,t)}function y(t,e){if(!e._v)return!0;for(var n,r,i=e._asv(X),o=[],a=!0,u=rt(i),s=0,c=u.length;s<c;s++)if(n=i[u[s]],r=Dt(t,u[s]),!n(r)){o.push(u[s],r);break}return a=!Ct(o),e.emit("validate:"+(a?"success":"fail"),a?[ut(t)]:o),a}function b(t,e,n){return!n._v||y(Ht(n.get(),t,e),n)}function x(t,e){return this.on(e,t)}function k(t,e){return yt(t)?t.concat(e):ht(t)?$t(st({},t),e):e}function E(t,e){return!console.warn(be({value:t,type:ft(t),msg:e||""}))}function _(t,e){return function(n){return t(n)||E(n,t({type:e}))}}function T(t){return function(e){return e instanceof t}}function S(t,e,n,r,i,o){var a={url:e,type:Q[t],aysnc:!0,param:n,header:o};return a.success=function(){(r||it).apply(this,arguments),this.emit(t+":success",arguments)}.bind(this),a.fail=function(){(i||it).apply(this,arguments),this.emit(t+":fail",arguments)}.bind(this),this.emit(t,[qt(a),a])}function w(t){return t.split("").reverse().join("")}function N(t,e){return Rt(P(t),A(t,e),M(t))}function P(t){return function(){var e=at(arguments);return t.emit("beforeRender",e),e}}function A(t,e){return function(n){return e.apply(t,n),n}}function M(t){return function(e){return t.root._vid=t._vid,t.root.setAttribute("ax-root",""),t.emit("completed",e)}}function O(t,e){var n=N(t,e);return ot(t,"render",{get:function(){return n},set:function(e){return dt(e)&&(n=N(t,e)),n},enumerable:!0,configurable:!1}),t}function L(t){if(!_t(t)&&!bt(t))throw new TypeError("el must be typeof DOMElement or NodeList collections -> not "+t);return!0}function D(t,e){return function(n){return n[t].apply(n,e)}}function H(t){return function(e,n){return dt(e)&&n===X?e(t):[]}}function I(t){return t.name===this}function j(t,e){var n=this._assert(Bt,X),r=vt(t)?[t]:yt(t)?t:[];return Pt(r,(function(t){e.call(this,n,t)}),this),this}function q(t,e){var n=[];switch(ft(e)){case"regexp":Pt(t,(function(t){e.test(t.name)&&n.push(t.name)}));break;case"string":n.push(e);break;case"array":n=e}return n}t.VERSION=e.VERSION;var C,R,z,$,F,J,V,B,G,K,X=[],U={},Y={use:[]},Z={data:{},validate:{}},Q={get:"GET",put:"POST",send:"GET",sync:"POST",post:"POST",fetch:"GET",update:"POST"},W=e.root,tt=e.v8(),et=e.ayc(),nt=e.lock(),rt=e.keys(),it=e.noop(),ot=e.define(),at=e.slice(),ut=e.clone(),st=e.extend(),ct=e.eq(),lt=e.convert("string"),ft=e.type(),ht=e.type("object"),dt=e.type("function"),pt=e.type("num"),mt=e.type("bool"),vt=e.type("str"),gt=e.type("int"),yt=e.type("array"),bt=e.type("arraylike"),xt=e.type("primitive"),kt=e.type("float"),Et=e.type("dom"),_t=e.type("elm"),Tt=e.type("node"),St=e.type("required"),wt=e.op(),Nt=e.op("object"),Pt=e.op("array"),At=e.map(),Mt=e.event("on"),Ot=e.event("unbind"),Lt=e.event("emit"),Dt=e.prop("get"),Ht=e.prop("set"),It=e.prop("not"),jt=(e.param(),e.param("string"),e.has()),qt=e.ajax(),Ct=e.size(),Rt=e.link(),zt=e.doom(),$t=e.merge(),Ft=e.index(),Jt=e.index("one"),Vt=e.html("decode"),Bt=e.cool();R=function(t){this.el=bt(t)?at(t):t instanceof Element?[t]:[]},C=function(t){return C.init.call(W,t)};var Gt=1,Kt={},Xt="onfocusin"in e.root,Ut={focus:"focusin",blur:"focusout"},Yt={mouseenter:"mouseover",mouseleave:"mouseout"},Zt={check:"change"},Qt={change:"input",input:"input"},Wt=["input","keypress","keydown","keyup"],te=(["compositionstart","compositionupdate"].concat(["compositionend"]),/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/),ee={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},ne=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||function(t){return null!=this.parentNode&&this!==document&&jt(this.parentNode.querySelectorAll(t),this)};C.init=function(t){return new R(t)},C.matchz=function(t,e){return!(null===t||t===document||!vt(e))&&ne.call(t,e)},C.event={add:h,remove:d},C.proxy=function(t,e){var n=2 in arguments&&at(arguments,2);if(dt(t)){var r=function(){return t.apply(e,n?n.concat(at(arguments)):arguments)};return r._zid=i(t),r}if(vt(e))return n?C.proxy.apply(null,(n.unshift(t[e],t),n)):C.proxy(t[e],t);throw new TypeError("expected function")},C.Event=function(t,e){vt(t)||(e=t,t=e.type);var n=document.createEvent(jt(ye.MouseEvent,t)?"MouseEvent":"Events"),r=!0;if(e)for(var i in e)"bubbles"===i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),v(n)},C.xEvent=function(t){for(var e in t)this[e]=t[e]};var re={class:"className",style:"style.cssText",placeholder:"@placeholder",maxlength:"@maxlength",minLength:"@minLength",max:"@max",min:"@min",href:"@href",checked:"*checked",disabled:"*disabled",readonly:"*readonly",required:"*required",selected:"*selected",controls:"*controls",ended:"*ended",muted:"*muted",hidden:"*hidden",seeking:"*seeking",paused:"*paused",loop:"*loop",autoplay:"*autoplay",multiple:"*multiple",autofocus:"*autofocus",autocomplete:"*autocomplete",draggable:"*draggable",spellcheck:"*spellcheck",translate:"*translate",specified:"*specified",defer:"*defer",async:"*async"},ie=["no","replace","append","remove","modifytext","withtext","removetext","addattr","modifyattr","removeattr"],oe=new RegExp("</([^><]+?)>|<([^><]+?)/>|<([^><]+?)>|([^><]+)|$","g"),ae={input:1,br:1,hr:1,img:1,meta:1,area:1,base:1,col:1,isindex:1,command:1,embed:1,keygen:1,link:1,head:1,param:1,source:1,track:1,wbr:1,path:1,circle:1,ellipse:1,line:1,rect:1,use:1,stop:1,polyline:1,polygon:1},ue=/(\S+)=["'](.*?)["']|([\w\-]+)/gi,se=/^\{|\}$/gi,ce=/^\{([^'"\s]+)\}$/i,le=/^[\r\n\f\t\s]+|[\r\n\f\t\s]+$/gi,fe=/^default[^\s]+/i,he=function(t,e,n){var r=re[e]||e;if(n=vt(n)?Vt(n):n,fe.test(r)){r=r.slice(7).toLowerCase();var i=t.getAttribute(r)||t[r];null!=i&&""!==i||he(t,r,n)}else"*"===r[0]?Ht(t,r.slice(1),"true"===n||!0===n):"@"===r[0]?t.setAttribute(r.slice(1),n):":"===r[0]?C(t).on(r.slice(1),n):Ht(t,r,n)},de=function(t,e,n){if(":"===e[0]&&dt(n))C(t).off(e.slice(1),n);else if(t[e]&&!delete t[e])try{t[e]=null}catch(t){}else t.removeAttribute(e)},pe=function(t,e,n){var r,i=e;return ce.test(e)&&(i=void 0!==(r=n[e.replace(se,"")])?r:e),":"===t[0]&&(i=dt(r)?r:Function("event",lt(e))),i},me=function(t,e){var n={};return Nt(e,(function(e,r){t[r]===e&&(n[r]=1)})),n},ve=[it,function(t,e){(e=t.s)&&e.parentNode&&(e.parentNode.insertBefore(t.n,e),e.parentNode.removeChild(e))},function(t,e){t.s.appendChild(t.n)},function(t,e){(e=t.s)&&e.parentNode&&e.parentNode.removeChild(e)},function(t,e){t.s.innerHTML=t.c},function(t,e){(e=t.s).innerHTML="",e.innerHTML=t.c},function(t,e){t.s.innerHTML=t.n.innerHTML},function(t){Nt(t.a,(function(e,n){he(t.s,n,e)}))},function(t,e,n){e=t.s,n=me(t.o,t.a),Nt(t.o,(function(t,r){r in n||de(e,r,t)})),Nt(t.a,(function(t,r){r in n||he(e,r,t)}))},function(t){Nt(t.a,(function(e,n){de(t.s,n,e)}))}],ge={treeDiff:function(t,e,n,r,i){if(void 0===t)n.unshift(ge.createPatch(r,e,2));else if(void 0===e)n.push(ge.createPatch(t,e,3));else if(t.tagName===e.tagName){if(ct(t.attributes,e.attributes)||(t.attributes&&e.attributes?n.push(ge.createPatch(t,e,8)):t.attributes?e.attributes||n.push(ge.createPatch(t,e,9)):n.push(ge.createPatch(t,e,7))),t.text!==e.text)return t.text&&e.text&&t.text!==e.text?n.push(ge.createPatch(t,e,4)):t.text?e.text||n.push(ge.createPatch(t,e,6)):n.push(ge.createPatch(t,e,5)),n;if(t.child.length||e.child.length)for(var o=Math.max(t.child.length,e.child.length);o--;)ge.treeDiff(t.child[o],e.child[o],n,t,e)}else t.tagName!==e.tagName&&n.push(ge.createPatch(t,e,1));return n},applyPatch:function(t,e,n){return Pt(At(e,(function(e){return e.s=ge.mapTreeNode(t,e.s),e})),(function(e){ve[e.t].call(t,e)})),n?n(t):t},mapTreeNode:function(t,e){for(var n,r=0,i=e.length,o=t.children;r<i&&o[e[r]];r++)o=(n=o[e[r]]).children;return n},createSelector:function(t){for(var e=[t.i];t=t.parent;)void 0!==t.i&&e.unshift(t.i);return e},createPatch:function(t,e,n){var r,i=ge.createSelector(t);switch(ie[n]){case"replace":r={t:1,s:i,n:ge.createDOMElememnt(e)};break;case"append":r={t:2,s:i,n:ge.createDOMElememnt(e)};break;case"remove":r={t:3,s:i};break;case"modifytext":r={t:4,s:i,c:e.text};break;case"withtext":r={t:5,s:i,c:e.text};break;case"removetext":r={t:6,s:i,n:ge.createDOMElememnt(e)};break;case"addattr":r={t:7,s:i,a:e.attributes};break;case"modifyattr":r={t:8,s:i,a:e.attributes,o:t.attributes};break;case"removeattr":r={t:9,s:i,a:t.attributes};break;default:r={t:0}}return r},createTreeFromHTML:function(t,e){var n,r={tagName:"root",child:[]},i=r,o=r.child;return t.replace(oe,(function(t,r,a,u,s){return t&&t.replace(le,"")?(r?(i=i.parent,o=i.child):a?((n=ge.createObjElement(a,e)).i=o.length,o.push(n),n.parent=i):u?((n=ge.createObjElement(u,e)).i=o.length,o.push(n),n.parent=i,n.tagName in ae||(i=n,o=n.child)):s&&s.trim()&&(i.text=s),t):t})),r},createObjElement:function(t,e){var n=t.split(" "),r=ht(e)?e:{},i=n.shift(),o=n.join(" "),a={tagName:i,child:[]};if(o){for(var u,s,c={};u=ue.exec(o);)u[1]?c[u[1]]=pe(u[1],u[2],r):s?(c[s]=pe(s,u[0],r),s=0):s=u[0];a.attributes=c}return a},createDOMElememnt:function(t){var e=document.createElement(t.tagName);return t.attributes&&Nt(t.attributes,(function(t,n){he(e,n,t)})),t.text?e.innerHTML=t.text:t.child.length&&Pt(t.child,(function(t){e.appendChild(ge.createDOMElememnt(t))})),e}},ye={UIEvent:["focus","blur","focusin","focusout"],MouseEvent:["click","dbclick","mouseup","mousedown","mouseout","mouseover","mouseenter","mouseleave"],KeyboardEvent:["keydown","keypress","keyup"]};R.prototype={get:function(t){return 0 in arguments?this.el[+t+(t<0?this.length:0)]:this.el},each:function(t,e){return Pt(this.el,t,e||this),this},find:function(t){var e=[];return Pt(this.el,(function(n){e=at(n.querySelectorAll(t)).concat(e)})),C(e)},closest:function(t,e){for(var n,r=this.el,i=this.get(0),o=0,a=r.length;o<a;o++,i=r[o]){for(;i&&!n&&i!==e;)C.matchz(i=i.parentNode,t)&&(n=i);if(n)break}return C(n||[])},on:function(t,e,n,r,i){var o,a,u=this;return t&&!vt(t)?(wt(t,(function(t,r){u.on(r,e,n,t,i)})),u):(vt(e)||dt(r)||!1===r||(r=n,n=e,e=void 0),void 0!==r&&!1!==n||(r=n,n=void 0),!1===r&&(r=m),u.each((function(u){i&&(o=function(t){return d(u,t.type,r),r.apply(this,arguments)}),e&&(a=function(t){var n=C.matchz(t.target,e)?t.target:C(t.target).closest(e,u).get(0);if(n&&n!==u)return(o||r).apply(n,[st(t,{currentTarget:n,liveFired:u})].concat(at(arguments,1)))}),h(u,t,r,n,e,a||o)})))},off:function(t,e,n){return t&&!vt(t)?(wt(t,(function(t,n){this.off(n,e,t)}),this),this):(vt(e)||dt(n)||!1===n||(n=e,e=void 0),!1===n&&(n=m),this.each((function(r){d(r,t,n,e)})))},trigger:function(t,e){return t=vt(t)?C.Event(t):v(t),t._args=e,this.each((function(n){t.type in Ut&&dt(n[t.type])?n[t.type]():"dispatchEvent"in n?n.dispatchEvent(t):C(n).triggerHandler(t,e)}))},triggerHandler:function(t,e){var n,r;return this.each((function(i){(n=g(vt(t)?C.Event(t):t))._args=e,n.target=i,wt(o(i,t.type||t),(function(t){if(r=t.proxy(n),n.isImmediatePropagationStopped())return!1}))})),r},html:function(t){return this.each((function(e){e.innerHTML=lt(t)}))},remove:function(){return this.each((function(t){t.parentNode.removeChild(C(t).off().get(0))}))},render:function(t,e,n){return this.each((function(r){if(r._vid!==e._vid)return r.appendChild(ge.createDOMElememnt(e.axml=ge.createTreeFromHTML(t,n)).firstElementChild,r.innerHTML=null);var i=ge.createTreeFromHTML(t,n);return ge.applyPatch(r,ge.treeDiff(e.axml,i,[]),(function(){e.axml=i}))}))}};zt("[ checker -> ax.va.{{#type}} ]");var be=zt("The value Of *( {{#value}} ) with type [ {{#type}} ] not pass validate! {{#msg}}"),xe=[],ke=W.localStorage,Ee=String.fromCharCode;J={t:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",kAt:function(t,e){return t.charCodeAt(~~(e%t.length))},ecd:function(t){var e,n,r,i,o,a,u=0,s="";if(!t)return t;do{e=(o=t[u++]<<16|t[u++]<<8|t[u++])>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,s+=this.t.charAt(e)+this.t.charAt(n)+this.t.charAt(r)+this.t.charAt(i)}while(u<t.length);return((a=t.length%3)?s.slice(0,a-3):s)+"===".slice(a||3)},dcd:function(t){var e,n,r,i,o,a,u=0,s=[];if(!t)return t;t+="";do{e=(a=this.t.indexOf(t.charAt(u++))<<18|this.t.indexOf(t.charAt(u++))<<12|(i=this.t.indexOf(t.charAt(u++)))<<6|(o=this.t.indexOf(t.charAt(u++))))>>16&255,n=a>>8&255,r=255&a,s.push(e),64!==i&&(s.push(n),64!==o&&s.push(r))}while(u<t.length);return s},incry:function(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n[r]=t[r].charCodeAt(0)^this.kAt(e,r);return this.ecd(n)},decyt:function(t,e){for(var n=0,r=(t=this.dcd(t)).length;n<r;n++)t[n]=Ee(t[n]^this.kAt(e,n));return t.join("")},set:function(t,e){ke.setItem("Ax@"+this.incry(t,w(t)),this.incry(JSON.stringify(e),t))},get:function(t){var e=ke.getItem("Ax@"+this.incry(t,w(t)));return e?JSON.parse(this.decyt(e,t)):0},rm:function(t){ke.removeItem("Ax@"+this.incry(t,w(t)))}};var _e=function(t,e){return Nt(e,(function(t,e){ot(this,e,{value:t,writable:!1,enumerable:!1,configurable:!1})}),t),t};B=(z=function(t){var e=st(ut(Z),t||{}),n=e.events,r=e.validate||{},i=dt(e.filter)?e.filter:Bt,o=vt(e.name),a=!(!e.store||!o),u=e.data||{},s=a?J.get(e.name)||u:u;Nt(n,x,_e(this,{name:o?e.name:"_",_ast:function(t,e){return e===X?t(s):{}},_asv:function(t){return t===X?r:{}},_v:!!Ct(r),_f:i,_c:function(t,e){return e===X?s=t:{}},_s:a})),o&&(xe[this.name]=this),delete e.name,delete e.data,delete e.store,delete e.change,delete e.events,delete e.validate,delete e.filter,st(this,e).emit("init").unbind("init")}).prototype={constructor:z,get:function(t,e){var n=this._ast(ut,X);return t||0===t?Dt.call(this,n,t,e):n},set:function(t,e){var n,r=this._ast(Bt,X);return 1 in arguments?xt(t)&&!ct(Dt(r,t),e)&&b(t,e,this)&&(Ht(r,t,e),this.change=!0,this._s&&J.set(this.name,r),this.emit("change",[ut(r)]),this.emit("change:"+t,[e])):!xt(t)&&(n=this._f(t))&&!ct(r,n)&&y(n,this)&&(this._c(n,X),this.change=!0,this._s&&J.set(this.name,n),this.emit("change",[ut(n)])),this},rm:function(t){var e=this._ast(Bt,X);return xt(t)&&null!=t&&void 0!==Dt(e,t)&&(It(e,t),this._s&&J.set(this.name,e),this.emit("change",[ut(e)]),this.emit("remove:"+t)),this},moc:function(t,e){return this.set(t,k(this.get(t),e))},on:function(t,e){return dt(e)&&Mt(this,t,e),this},emit:function(t,e){return Lt(this,t,e||[])},unbind:function(t,e){return Ot(this,t,e)},toJSON:function(){return JSON.stringify(this.get())},send:function(t,e){return ht(t)&&(e=t,t=null),S.apply(this,["send",t||this.url,this.get(),it,it,e])},fetch:function(t,e,n){return dt(t)&&(n=e,e=t,t={}),S.apply(this,["fetch",this.url,t,Rt(dt(e)?e:JSON.parse,this.set.bind(this)),it,n])},sync:function(t,e){return ht(t)&&(e=t,t=null),S.apply(this,["sync",t||this.url,this.get(),it,it,e])},toString:function(){return lt(this.toJSON())}};var Te=0;G=($=function(t){var e=st(ut(U),t||{}),n=e.root,r=e.render,i=e.events,o=e.template,a=nt(ht(e.props)?e.props:{});delete e.root,delete e.mount,delete e.props,delete e.events,delete e.render,delete e.template,delete e.destroy,dt(r)||(o=vt(o)?zt(o.trim(),a):dt(o)?o:it,r=function(){return o!==it&&C(this.root).render(o.apply(this,at(arguments)),this,a)}.bind(this)),n&&L(n)?(this.root=n,Nt(i,x,O(this,r)),e.model&&V.model(e.model)&&e.model.on("change",this.render.bind(this))):this.mount=function(t){if(L(t))return this.root=n=t,Nt(i,x,O(this,r)),e.model&&V.model(e.model)&&e.model.on("change",this.render.bind(this)),1 in arguments&&this.render.apply(this,at(arguments,1)),delete this.mount,this},this._vid=Te++,st(this,e).emit("init").unbind("init")}).prototype={constructor:$,on:function(t,e){return Pt(lt(t).split("|"),(function(t){var n=t.split(":");n.length>1?C(this.root).on(n[0],n[1],e._bind||(e._bind=e.bind(this))):Mt(this,t,e)}),this),this},unbind:function(t,e){return Pt(lt(t).split("|"),(function(t){var n=t.split(":");n.length>1?C(this.root).off(n[0],n[1],e?e._bind||e:void 0):Ot(this,t,e)}),this),this},emit:function(t,e){var n=(t||"").split(":");return n.length>2?(Pt(lt(t).split("|"),(function(t){var n=t.split(":");C(this.root).find(n[1]).trigger(n[0],e)}),this),this):n.length>1?(C(this.root).find(n[1]).trigger(n[0],e),this):Lt(this,t,e)},destroy:function(t){this.root.removeAttribute("ax-root",this.root._vid=void 0),et(function(){C(this.root).off()[t?"remove":"html"](),this.emit("destroy",delete this.root)}.bind(this))},toString:function(){return this.root?this.root.outerHTML:""}};var Se=function(e,n){var r=t.atom({use:n});return r.back=function(){return e},r};return K=(F=function(t){var e=st(ut(Y),t||{}),n=e.use,r=(e.events,[]);delete e.use,delete e.events,this._assert=H(r),st(this.use(n),e)}).prototype={constructor:F,all:function(){return this._assert(at,X)},use:function(t){return j.call(this,t,(function(t,e,n){e&&(n=xe[e])&&V.model(n)&&!jt(t,n)&&t.push(n)}))},out:function(t){return j.call(this,t,(function(t,e){var n=Ft(t,I.bind(e));pt(n)&&t.splice(n,1)}))},p:function(t){return Jt(this.all(),I.bind(t))},of:function(t,e){return Pt(this.all(),dt(t)?t:D(t,e)),this},select:function(t){return Se(this,q(this.all(),t))},toData:function(){return At(this._assert(Bt,X),(function(t){return t.get()}))},toChunk:function(){var t={};return this.of((function(e){t[e.name]=e.get()})),t}},Pt(["extend","not","cat","find","filter","reject","chunk","compact","pluck","groupBy","countBy","pairs","shuffle","flat","merge","map","sort","unique","concat","pull","drop","pairs",["hook","map","hook"],["mapKey","map","key"],["uniqueFast","unique","fast"],["pullAt","pull","at"],["dropLeft","drop","left"],["dropRight","drop","right"],["dropLeftTo","drop","leftto"],["dropRightTo","drop","rightto"],["unpairs","pairs","un"]],(function(t){var n,r,i;yt(t)?(r=t[1],n=t[0],i=t[2]):(r=t,n=t,i=void 0),z.prototype[n]=function(){var n=this.get(),o=[n].concat(at(arguments));return ct(n=e[r](i).apply(n,o),this.get())||this.emit((this.set(n),t),o),this},F.prototype[n]=function(){return e[r](i).apply(this,[this.toData()].concat(at(arguments)))}})),Pt(["keys","every","some","diff","intsec","first","last","auto","eq","values","size","each","has","type","index",["hasKey","has","key"],["findex","index","first"],["lindex","index","last"],["single","index","one"],["one","index","one"],["reduce","reduce","left"],["reduceRight","reduce","right"]],(function(t){var n,r,i;yt(t)?(r=t[1],n=t[0],i=t[2]):(r=t,n=t,i=void 0),z.prototype[n]=function(){var t=[this.get()].concat(at(arguments));return e[r](i).apply(this,t)},F.prototype[n]=function(){return e[r](i).apply(this,[this.toData()].concat(at(arguments)))}})),t.model=n(z),t.view=n($),t.atom=n(F),t.model.extend=r(z),t.view.extend=r($),t.atom.extend=r(F),t.va=V={required:_(St,"required"),fn:_(dt,"function"),int:_(gt,"int"),array:_(yt,"array"),float:_(kt,"float"),string:_(vt,"string"),object:_(ht,"object"),number:_(pt,"number"),arrayLike:_(bt,"arrayLike"),primitive:_(xt,"primitive"),bool:_(mt,"boolean"),dom:_(Et,"dom"),element:_(_t,"element"),node:_(Tt,"node"),model:_(T(z),"model"),view:_(T($),"view"),atom:_(T(F),"atom")},nt(z,$,F,J,tt(B),tt(G),tt(K),tt(V),tt(ge),tt(t))}));