!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e._=t()}(this,function(){function aloop(e,t,n){for(var i=0,r=e.length;i<r;i++)t.apply(n||e,[e[i],i,e]);return e}function oloop(e,t,n){var i=_.keys(e);return aloop(i,function(i,r){t.call(n||e,e[i],i,e)},n||e),e}function pP_rSpace(e){return decodeURIComponent(e.replace(/\+/g," "))}function sP_rInsignia(e){return encodeURIComponent(e).replace(" ","%20")}function c_ecode(e){return ecode[e]||e}function c_dcode(e){return dcode[e]||e}function c_escape(e){return"\\"+escapes[e]}var VERSION="0.1",OP=Object.prototype,_arr=[],_slice=_arr.slice,_splice=_arr.splice,root=function(){return this||(0,eval)("this")}(),_={};_.extend=function(e){var t=_slice.call(arguments);if(t.length>1)_.compose(e,t[1],t[2]);else for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);return e},_.define=function(e,t,n){return _.isObject(t)?Object.defineProperties(e,t):Object.defineProperty(e,t,n)},_.isObject=function(e){return"function"==typeof e||"object"==typeof e&&!!e};var typeArray=["Array","Arguments","Boolean","Function","String","Number","Null","Date","RegExp","NodeList","Undefined","HTMLCollection"];typeArray.forEach(function(e,t){_["is"+e]=function(t){return OP.toString.call(t)==="[object "+e+"]"}}),_.extend({NULL:function(){},cool:function(e){return e},root:root,broken:{},version:VERSION,foreach:function(e,t,n){if(null!=e){if(this.isArray(e))return aloop(e,t,n);if(_.isObject(e)&&!_.isFunction(e))return oloop(e,t,n)}return e},loop:function(){return this.foreach.apply(_.slice(arguments))},keys:function(e){return _.isArray(e)?Object.keys(e).map(function(e){return+e}):Object.keys(e)},slice:function(e){return null!=e?_slice.call(e):[]},splice:function(e,t,n){return _.isArray(e)?_splice.call(e,t,n||1):delete e[t],e},pop:function(e){return _.isArray(e)?e.pop():e},shift:function(e){return _.isArray(e)?e.shift():e},push:function(e){return _.isArray(e)&&e.push.apply(e,_slice.call(arguments,1)),e},unshift:function(e){return _.isArray(e)&&e.unshift.apply(e,_slice.call(arguments,1)),e},clone:function(e){return _.isArray(e)?_slice.call(e):_.isObject(e)&&!_.isFunction(e)?JSON.parse(JSON.stringify(e)):e},clonedoom:function(e){if(_.isArray(e)||_.isArguments(e)||_.isNodeList(e)||_.isHTMLCollection(e))return _slice.call(e);if(_.isObject(e)&&!_.isFunction(e)){var t=function(){};t.prototype=e.constructor.prototype;var n=new t;return _.foreach(e,function(e,t){_.isString(e)||_.isNumber(e)||_.isFunction(e)?n[t]=e:n[t]=_.clonedoom(e)}),n}return e},sort:function(e,t){return _.isArray(e)?e.sort(t):e},unique:function(e){for(var t=0,n=e.length;t<n;t++)if(t!==e.length-1)for(var i=t+1;i<e.length;i++)e[t]===e[i]&&e.splice(i--,1);return e},reject:function(e,t){var n=[];return _.foreach(_.clonedoom(e),function(e,n){t.call(this,e,n,this)||this.push(e)},n),n},filter:function(e,t){var n=[];return _.foreach(_.clonedoom(e),function(e,n){t.call(this,e,n,this)&&this.push(e)},n),n},map:function(e,t){return _.foreach(e,function(e,n){this[n]=t.call(this,e,n,this)},e)},find:function(){return this.filter.apply(this,this.slice(arguments))},cat:function(e,t){var n=[];if(_.isArray(e))for(var i=e.length;i--;)t.call(e,e[i],i,e)&&n.push(e.splice(i,1).pop());else if(_.isObject(e))for(var i in e)if(e.hasOwnProperty(i)&&t.call(e,e[i],i,e)){var r={};r[i]=e[i],n.push(r),delete e[i]}return n},findindex:function(e,t){var n=[];return _.foreach(e,function(e,n){t.call(this,e,n,this)&&this.push(n)},n),n},hook:function(e,t){var n=_slice.call(arguments,2),i=_.isFunction(t);return this.map(e,function(e){return(i?t:e[t]).apply(e,n)})},bind:function(e){var t=_slice.call(arguments,1);return _.foreach(e,function(n,i){this.isFunction(n)&&(e[i]=Function.bind.apply(n,t))},this),e},reverse:function(e){return _.isArray(e)?this.slice(e).reverse():e},pluck:function(e,t){var n=[];return _.foreach(e,function(e){for(var n=_.keys(e),i=n.length;i--;)n[i]===t+""&&this.push(e[n[i]])},n),n},groupby:function(e,t){if(_.isArray(e)){var n={},i=_.isFunction(t);return _.foreach(e,function(e){var n=i?t(e):e[t];this[n]?this.hasOwnProperty(n)&&this[n].push(e):this[n]=[e]},n),n}return e},toarray:function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},forarray:function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;r<n;r++){var o={};o[t[r]]=e[t[r]],i[r]=o}return i},pairs:function(e){for(var t=[],n=_.keys(e),i=0,r=n.length;i<r;i++)t.push([n[i],e[n[i]]]);return t},random:function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},compose:function(e,t,n){return n?_.foreach(t,function(t,i){var r=this.isArray(n)?!this.has(n,i):null==n||i!==n;r&&(e[i]=t)},this):_.foreach(t,function(t,n){e[n]=t}),e},has:function(e,t){var n=0;return _.foreach(e,function(e){e===t&&(n=1)}),!!n},not:function(e,t){for(var n=0,i=e.length;n<i;n++)_.isequal(e[n],t)&&_.splice(e,n--);return e},bale:function(e,t,n){return _.isArray(e)&&_.isArray(t)?[].concat(e).concat(t):_.compose(_.clonedoom(e),_.clonedoom(t),n)},shuffle:function(e){for(var t,n=_.isArray(e)?e:_.toarray(e),i=n.length,r=Array(i),o=0;o<i;o++)t=_.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},trim:function(e){return e.replace(/^\s+|\s+$/gm,"")},merge:function(){var e=[],t=_slice.call(arguments);return t.forEach(function(t){e=e.concat(t)}),this.unique(e)},partial:function(e){var t=_slice.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,o=i.length;r<o;r++)i[r]===_&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},before:function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},part:function(e,t){var n=_.partial(_.before,(parseInt(t)||1)+1);return n(e)},once:function(e){return _.part(e,1)},isequal:function(e,t,n){if(n||null==e||null==t||_.isFunction(e)||_.isFunction(t)||e===t)return e===t;if(_.typeof(e)!==_.typeof(t))return!1;if(e.toString()===t.toString()){if(_.isArray(e)){if(e.length===t.length){for(var i=e.length;i--;)if(e[i]!==t[i])return!1;return!0}return!1}if(_.isObject(e)){var r=_.keys(e),o=_.keys(t);if(r.length===o.length){for(var i=r.length;i--;)if(e[r[i]]!==t[r[i]])return!1;return!0}return!1}}return!1},typeof:function(e){var t,n=[_.isArray(e),_.isArguments(e),_.isBoolean(e),_.isFunction(e),_.isString(e),_.isNumber(e),_.isNull(e),_.isDate(e),_.isRegExp(e),_.isNodeList(e),_.isUndefined(e),_.isHTMLCollection(e)];return t=_.findindex(n,function(e){return e===!0}).shift(),null==t?"object":typeArray[t].toLowerCase()},requery:function(e){var t={};return _.foreach(e,function(e){t[e.name]=e.value}),t},async:function(e,t){return setTimeout(e,t||0)},combom:function(e,t){for(var n,i=0,r=e.length;i<r;i++)if(t.call(e,e[i],i,e)){n=e[i];break}return n}});var whiteSpace=/[\t\r\n\f\x20]/g;_.extend({paramparse:function(e){var t,n,i=e.indexOf("?"),r=/([^&=]+)=?([^&]*)/g,o={};for(t=i===-1?e:e.substr(i+1);n=r.exec(t);)o[pP_rSpace(n[1])]=pP_rSpace(n[2]);return o},paramstringify:function(e){var t=_.clone(e);for(var n in t)t[n]=sP_rInsignia(_.isObject(t[n])||_.isArray(t[n])?JSON.stringify(t[n]):t[n]);var i=JSON.stringify(t);return i.replace(/[\"\{\}]/g,"").replace(/:/g,"=").replace(/,/g,"&").replace(whiteSpace,"")},stringparse:function(e){return _.isBoolean(e)?e:e+""}});var ecode={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"$quot;","'":"&#x27;","`":"&#x60"},dcode={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#x27;":"'","&#x60;":"`"},no="(.)^",escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},doomSetting=_.doomSetting={escape:"{{-([\\s\\S]+?)}}",interpolate:"{{#([\\s\\S]+?)}}",evaluate:"{{([\\s\\S]+?)}}"};if(_.extend({encodeHTML:function(e){return+e===e?e:e.replace(/[&<">'](?:(amp|lt|quot|gt|#39);)?/g,c_ecode)},decodeHTML:function(e){return+e===e?e:e.replace(/&((g|l|quo)t|amp|#39);/g,c_dcode)},doom:function(txt,name){var index=0,res="_p+='",args=_slice.call(arguments,2),exp=RegExp((this.doomSetting.escape||no)+"|"+(this.doomSetting.interpolate||no)+"|"+(this.doomSetting.evaluate||no)+"|$","g");txt.replace(exp,function(e,t,n,i,r){return res+=txt.slice(index,r).replace(escaper,c_escape),index=r+e.length,t?res+="'+\n((_t=("+t+"))==null?'':_.encodeHTML(_t))+\n'":n?res+="'+\n((_t=("+n+"))==null?'':_t)+\n'":i&&(res+="';\n"+i+"\n_p+='"),e}),res+="';\n",name||(res="with(_x||{}){\n"+res+"}\n"),res="var _t,_p='';\n"+res+"return _p;\n";try{var render=new Function(name||"_x","_",res),render=eval("(function("+(name||"_x")+",_"+(args.length?","+args.toString():"")+"){"+res+"})")}catch(e){throw e.res=res,console.log(res),e}return function(e){return render.call(this,e,_)}}}),_.extend({watch:function(e,t,n){function i(){return a}function r(i){return o=a,a=n.call(e,i,o,t)}var o=e[t],a=o;return delete e[t]&&(Object.defineProperty?Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(e,t,i),Object.prototype.__defineSetter__.call(e,t,r))),e},unwatch:function(e,t){var n=e[t];return delete e[t],e[t]=n,e}}),_.extend({addEvent:function(e,t,n){return e._events||_.define(e,"_events",{value:{},writable:!0,enumerable:!1,configurable:!0}),e._events[t]||(e._events[t]=[]),_.has(e._events[t],n)||e._events[t].push(n),e},removeEvent:function(e,t,n){if(e._events[t])_.not(e._events[t],n),e._events[t].length&&n||delete e._events[t];else if(!t&&!n)return _.release(e);return e},release:function(e){return delete e._events,e},dispatch:function(e,t,n,i){var r=_.isFunction(n);return e._events&&e._events[t]&&(r?_.foreach(e._events[t],function(t){t===n&&t.apply(e,i||[])}):_.foreach(e._events[t],function(t){t.apply(e,i||[])})),e},trigger:function(){return _.dispatch(_.slice(arguments))}}),_.root.self){var checkUA=function(e){this.info=e.userAgent,this.language=e.language,this.platform=e.platform};_.extend(checkUA.prototype,{defineBroswer:function(e,t){var n=this.info;this.browser={};for(var i=e.length;i--;)t[i].call(n,_.root)?this.browser[e[i]]=!0:this.browser[e[i]]=!1;return this},definePlatform:function(e,t){var n=this.info;this.version={};for(var i=e.length;i--;)this.version[e[i]]=t[i].call(n,_.root);return this}});var _CHECKER=new checkUA(_.root.navigator).defineBroswer(["IE","Edge","Opera","Chrome","Safari","FireFox","Mobile","Desktop"],[function(){return/(Trident|MSIE)/i.test(this)},function(){return/Edge/i.test(this)&&/Webkit/i.test(this)},function(){return/Opera/i.test(this)&&/Webkit/i.test(this)},function(e){return null!=e.chrome},function(){return/Safari/i.test(this)&&!/Chrome/i.test(this)},function(e){return/Firefox/i.test(this)&&e.netscape&&/Gecko/.test(this)},function(e){return e.devicePixelRatio>1},function(e){return null==e.devicePixelRatio||1===e.devicePixelRatio}]).definePlatform(["OS","RenderEnginner","Chrome","Firefox","IE"],[function(e){return/Windows/gi.test(this)?"Windows":/(Linux|Ubuntu|CentOS|Debian|Arach|RedHat|FreeBSD|Unix)/gi.test(this)?"Linux":/Macintosh/gi.test(this)?"Mac OS X":/iOS|iPad|iPhone/gi.test(this)?"iOS":/Android/gi.test(this)?"Android":"UnKown"},function(e){return/(Webkit|Gecko|Trident)/gi.exec(this)[0]},function(e){return!!/Chrome/gi.test(this)&&this.match(/(Chrome)\/([\d\.]+)/gi)[0].replace(/[^\d\.]/gi,"")},function(e){return!!/Firefox/gi.test(this)&&/Firefox\/([\d\.]+)/gi.exec(this)[1]},function(e){return!!/IE/gi.test(this)&&parseInt(/MSIE\ ([\d\.]+)/gi.exec(this)[1])}]),xhrcount=0,ls=_.root.localStorage;ls.getItem("aixcache")||ls.setItem("aixcache","{}");var bdlevel=/<(\/)?(\w+)\s?([^>]+?)?\>{1}/gi,parseattr=function(e){var t={},n=e?e.split(" "):[];return _.foreach(n,function(e,n){var i=e.split("=");t[i[0]]=(i[1]||"").replace(/[\'\"]/gm,"")}),t};_.extend({domparse:function(e){var t=(e||"").replace(/[\t\r\n\f]/gm,"").replace(/<script\b[^>]*>(.*?)<\/script>/gi,""),n=1,i=1,r=[[{tagname:"_",html:t,$ob:0,$oe:t.length}]],o=[];t.replace(bdlevel,function(e,t,a,s,c){var u,l={};if("/"!==t){u=n++,null==r[u]&&(r[u]=[]);u-i++;_.compose(l,{tagname:a,attributes:parseattr(_.trim(s||"")),$ob:c+e.length}),r[u].push(l),"input"===a?(--n,--i,l.$oe=0):o.push(l)}else{u=--n,--i;var f=o.pop();f.$oe=c-f.$ob}return e});for(var a=1,s=r.length;a<s;a++)for(var c=r[a],u=r[a+1],l=r[a-1],f=0,h=c.length;f<h;f++){var d=c[f].$ob,p=c[f].$oe;c[f].content=_.trim(t.substr(d,p)),c[f].child=u?_.filter(u,function(e){return e.$ob>d&&e.$ob+e.$oe<d+p}):[],c[f].parent=l?_.combom(l,function(e){return d>e.$ob&&d+p<e.$ob+e.$oe}):null}return r},cookieparse:function(e){var t,n={},i=e?e.split(";"):[];return i.forEach(function(e){t=(e||"").split("="),t.length&&(n[_.trim(t[0])]=_.trim(t[1]))}),n},cookie:function(e){var t=_.slice(arguments),n=t.length,i=_.cookieparse(_.root.document.cookie);if(n){if(1===n)return i[e];var r=new Date;return r.setDate(r.getDate()+365),_.root.document.cookie=_.trim(t[0]+"="+(t[1]||"")+";expires="+(t[2]||r.toGMTString())+";path="+(t[3]||"/")+";domain="+(t[4]||"")+";"+(t[5]?"secure":""))}return i},aix:function(e){var t=_.compose({url:"",type:"GET",param:_.broken,aysnc:!0,vaild:!0,cache:!1,success:_.NULL,fail:_.NULL,loading:null,loaded:null,header:_.broken,username:null,password:null,timeout:0},e||{});if(t.cache){var n=JSON.parse(ls.getItem("aixcache")),i=t.url||_.root.location.href.split("#")[0];if(n[i])return t.success.call(_.root,n[i])}var r=new XMLHttpRequest;if("GET"===t.type.toUpperCase()&&t.param&&(t.url+=(t.url.search(/\?/g)===-1?_.keys(t.param).length?"?":"":"&")+_.paramstringify(t.param),t.param=null),_.isFunction(t.loading)){var o=function(e){t.loading.call(_.root,e)};r.addEventListener("loadstart",function(e){o(e),r.removeEventListener("loadstart",o),o=null})}if(_.isFunction(t.loaded)){var a=function(e){t.loaded.call(_.root,e)};r.addEventListener("loadend",function(e){a(e),r.removeEventListener("loadend",a),a=null})}return null!=t.username?r.open(t.type,t.url,t.aysnc,t.username,t.password||""):r.open(t.type,t.url,t.aysnc),"POST"===t.type&&t.param&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Aix-Requested","AixHttpRequest"),_.isObject(t.header)&&t.header!==_.broken&&_.foreach(t.header,function(e,t){r.setRequestHeader(t,e)}),r.onreadystatechange=function(e){if(4===r.readyState&&r.responseText){var n=r.status;if(n>=200&&n<300||304===n){if(t.success.call(_.root,r.responseText,r,e),t.cache){var i=JSON.parse(ls.getItem("aixcache"));i[t.url||_.root.location.href.split("#")[0]]=r.responseText,ls.setItem("aixcache",JSON.stringify(i))}}else t.fail.call(_.root,r,e)}},r.send(t.param?_.isObject(t.param)?_.paramstringify(t.param):t.param:null),xhrcount++,t.timeout&&_.async(function(){r.abort(),t.fail.call(_.root,r)},1e3*t.timeout||5e3),r},aixp:function(e){var t=_.compose({url:"",param:_.broken,key:"callback",fn:("jsonp"+Math.random()).replace(".",""),timeout:5,success:_.NULL,fail:_.NULL},e||{}),n=t.url+"?"+_.paramstringify(t.param)+(_.keys(t.param).length?"&":"")+t.key+"="+t.fn,i=_.root.document.createElement("script");i.src=n,_.root[t.fn]=function(e){clearTimeout(t.timesetup),_.root.document.body.removeChild(i),_.root[t.fn]=null,t.success.call(_.root,e)},_.root.document.body.append(i),t.timeout&&(t.timesetup=setTimeout(function(){_.root.document.body.removeChild(i),_.root[t.fn]=null,t.success.call(_.root)},1e3*t.timeout)),xhrcount++},pagepref:function(){var e=_.slice(document.getElementsByTagName("*")),t="",n={},i="",r={},o="",a="",s=_.slice(document.getElementsByTagName("img")),c=[],u=_.slice(document.getElementsByTagName("script")),l=function(e,t,n){e[n]?e[n].push(t):e[n]=[t]};_.foreach(e,function(e){var s=e.getAttribute("class");s&&(i+=" "+s,s=_.trim(s).split(" "),_.foreach(s,function(t){l(r,e,t)})),s=e.getAttribute("id"),s&&(t+=" "+s,s=_.trim(s),l(n,e,s)),s=_.root.getComputedStyle(e),s&&s.backgroundImage&&"none"!==s.backgroundImage.toLowerCase()&&(a+=" "+s.backgroundImage),s=e.getAttribute("href"),s&&(o+=" "+s)}),_.foreach(s,function(e){var t=e.getAttribute("src");t&&(a+=" "+t)}),_.foreach(u,function(e){var t=e.getAttribute("src");t&&c.push(t.split("/").pop().slice(0,-3))});var f=t.split(" ");f.shift(),f=_.unique(f);var h=i.split(" ");h.shift(),h=_.unique(h);var d=a.split(" ");d.shift(),d=_.unique(d);var p=o.split(" ");return p.shift(),p=_.unique(p),{_url:window.location.href,htmlsize:(document.body.innerHTML+document.head.innerHTML).replace(whiteSpace,"").length,htmltags:e.length,idlist:f.sort(),idchecker:n,classlist:h.sort(),classchecker:r,scriptlist:c,imglist:d.sort(),linklist:p.sort(),cookies:_.cookie(),localstorage:ls||{},_aixxhr:xhrcount}},ua:_CHECKER})}var stack;_.stack=stack=function(e){var t=e||[],n=[];_.foreach(t,function(e){var t=_.isObject(e)?_.toarray(e):e||[],i=_.isFunction(t[0])?t[0]:_.NULL,r=_.isNumber(t[1])?t[1]:0,o=function(e){setTimeout(function(){var t=n.pop(),r=i.call(_.root,e);t&&t.call(_.root,r)},1e3*r)};n.push(o)}),_.define(this,"=",{value:n,writable:!0,enumerable:!1,configurable:!1})},_.extend(stack.prototype,{noop:function(){return this["="]=[],this},fire:function(){return this["="].length&&this["="].pop().call(_.root)},add:function(){return this.push.apply(this,_.slice(arguments))},push:function(){var e=this,t=_.slice(arguments);_.foreach(t,function(t){if(!_.isFunction(t)&&!_.isArray(t))return console.error("add/push arguments error when assign to stack!");var n=_.isArray(t)?t[0]:t,i=_.isArray(t)?t[1]||0:parseFloat(t||0),r=function(t){setTimeout(function(){var i=e["="].pop(),r=n.call(_.root,t);i&&i.call(_.root,r)},1e3*i)};e["="].push(r)})}});var hack;return _.hack=hack=function(e,t){var n=this,i=e||[],r=i.length,o=new Array(r),a=[];_.define(this,{complete:{value:t||_.NULL,writable:!0,enumerable:!1,configurable:!1},"-":{value:a,writable:!0,enumerable:!1,configurable:!1}}),_.foreach(i,function(e,t){var i=t,r=_.isObject(e)?_.toarray(e):e||[],s=_.isFunction(r[0])?r[0]:_.NULL,c=_.isNumber(r[1])?r[1]:0,u=function(){setTimeout(function(){var e=s();o[i]=e||1,_.has(o)||(n.complete.apply(_.root,o),n.noop())},1e3*c)};a.push(u)})},_.extend(hack.prototype,{noop:function(){return this["-"]=null,this.complete=null,this},fire:function(){return this["-"].length?_.foreach(this["-"],function(e){return e.call(_.root)}):0}}),_}),function(e,t){"function"==typeof define&&define.amd?define(["_"],t):e.__=t(_)}(this,function(e){"use strict";function t(){l||(l=!0,h.forEach(function(t,n){t.fn.call(e.root,t.ct)}),h=[])}function n(e){_.length>=d.config.limit&&_.shift(),_.push(e)}function i(t){return t.$el.every(function(t){return e.ua.browser.IE?document.body.contains(t):document.contains(t)})}function r(t){t=e.trim(t);var n=[],i=!b.test(t),o=!y.test(t);if(i&&o)if(t.search(",")>-1)e.foreach(t.split(","),function(e){n=n.concat(r(e))});else{if(p.test(t))return[document.getElementById(t.substr(1))];if(v.test(t))n=document.getElementsByClassName(t.substr(1));else if(g.test(t))n=document.getElementsByTagName(t);else{if(m.test(t)){var a=m.exec(t),s=a[1],c=a[2],u=a[3];return null==s?e.slice(document.getElementsByTagName("*")).filter(function(e){return e.getAttribute(c)===u}):r(s).filter(function(e){return e.getAttribute(c)===u})}if(x.test(t)){var l=document.createElement("i");return l.innerHTML=t,n=e.slice(l.childNodes),n.filter(function(e){return 1===e.nodeType})}n=document.querySelectorAll(t)}}else{if(x.test(t)){var l=document.createElement("i");return l.innerHTML=t,n=e.slice(l.childNodes),n.filter(function(e){return 1===e.nodeType})}n=document.querySelectorAll(t)}return e.slice(n)}function o(e){if(e.search("rgb")!=-1){var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+s(t[1])+s(t[2])+s(t[3])}return e}function a(e){if(e.search("-")!=-1){for(var t=e.split("-"),n=1,i=t.length;n<i;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join("")}return e}function s(e){return("0"+parseInt(e).toString(16)).slice(-2)}function c(e){if(null==e)return e;var t=e.nextSibling;return null!=t&&1===t.nodeType?t:c(t)}function u(t,n,i,r){var o,a=e.isObject(r)?r:new CustomEvent(n,{data:i,bubbles:!0,cancelable:!0,target:t,toElement:t,srcElement:t,currentTarget:t});return e.isObject(r)&&(o={},o.data=i),null!=o?new S.Events(a,o):a}var l=!1,f=!1,h=[],_=[],d=function(n,r){if(e.isFunction(n))return l?setTimeout(function(){n(r)},0):(h.push({fn:n,ct:r}),"complete"===document.readyState?setTimeout(t,0):f||document.addEventListener("DOMContentLoaded",t,!1),void(f=!0));if(n instanceof L)return n;if(e.isString(n)){var o;if(_.forEach(function(e){e.$indicator===n&&(o=e)}),null!=o&&i(o))return e.clonedoom(o)}return new L(n)};d.config={limit:4,version:e.version};var p=/^#[^\s\=\+\.\#\[\]]+/i,v=/^\.[^\s\=\+\.\#\[\]]+$/i,g=/^[^\[\]\+\-\.#\s\=]+$/i,m=/([^\s]+)?\[([^\s]+)=["']?([^\s'"]+)["']?\]$/i,b=/[\s|\r]+/gim,y=/[>|\+|\~]+/gim,x=/<[a-z][\s\S]*>/i,L=function(t){this.$el=[],null!=t&&(e.isString(t)?(this.$el=r(t),this.$indicator=t):t!==document&&t!==e.root&&1!==t.nodeType||(this.$el.push(t),this.$indicator="")),this.length=this.$el.length,n(e.clonedoom(this))};d.fn=L.prototype={constructor:L,version:e.version,extend:function(t){e.extend(this,t)}},d.fn.extend({each:function(t,n){return e.foreach(this.$el,t,n),this},get:function(e){return this.$el[+e+(e<0?this.length:0)]},at:function(t){var n=e.clonedoom(this);return t=+t+(t<0?n.length:0),n.$el=[n.$el[t]],n.length=1,n},first:function(){return this.at(0)},last:function(){return this.at(-1)},compose:function(t){return null!=t&&(t instanceof L?this.$el=e.unique(this.$el.concat(t.$el||[])):e.isString(t)&&(this.$el=e.unique(this.$el.concat(d(t).$el)))),this.length=this.$el.length,this},by:function(t){var n=e.clonedoom(this);return n.$el=n.$el.filter(t),n.length=n.$el.length,n},even:function(){return this.by(function(e,t){return t%2!=0})},odd:function(){return this.by(function(e,t){return t%2==0})},next:function(t){var n=e.clonedoom(this),i=[],r=t?"previousElementSibling":"nextElementSibling";return e.foreach(n.$el,function(e){null!=e[r]&&i.push(e[r])}),n.$el=e.filter(i,function(e){return 3!==e.nodeType&&8!==e.nodeType&&"SCRIPT"!==e.nodeName}),n.length=n.$el.length,n},prev:function(e){return this.next(!e)},find:function(t){var n=e.clonedoom(this),i=[];return e.foreach(n.$el,function(n){i=e.slice(n.querySelectorAll(t)).concat(i)}),n.$el=i,n.length=n.$el.length,n},siblings:function(){var t=e.clonedoom(this),n=[],i=t.$el;return e.foreach(t.$el,function(t){n=e.slice(t.parentNode.children).concat(n)}),t.$el=e.filter(e.unique(n),function(t){return!e.has(i,t)}),t.length=t.$el.length,t},childrens:function(){var t=e.clonedoom(this),n=[];return e.foreach(t.$el,function(t){n=e.slice(t.children).concat(n)}),t.$el=e.unique(n),t.length=t.$el.length,t}});var E=["checked","disabled","readonly","required","validate"];d.fn.extend({addClass:function(t){return this.each(function(n){var i=n.getAttribute("class");i?(i=i.split(" "),n.setAttribute("class",e.unique(i.concat(t.split(" "))).join(" "))):n.setAttribute("class",e.unique(t.split(" ")).join(" "))})},removeClass:function(t){return this.each(function(n){var i=n.getAttribute("class");i&&(i=i.split(" "),e.foreach(t.split(" "),function(t){e.not(i,t)}),n.setAttribute("class",i.join(" ")))})},toggleClass:function(t){return this.each(function(n){var i=n.getAttribute("class");i?(i=i.split(" "),e.foreach(e.unique(t.split(" ")),function(t){e.has(i,t)?e.not(i,t):i.push(t)}),n.setAttribute("class",i.join(" "))):n.setAttribute("class",t)})},attr:function(){var t=e.slice(arguments);if(t.length){if(1===t.length)return this.get(0).getAttribute(t[0]);this.each(function(n){n.setAttribute(t[0],e.parseString(t[1]))})}return this},removeAttr:function(e){return this.each(function(t){t.removeAttribute(e)})},data:function(){var t=e.slice(arguments);return t[0]?(t[0]="data-"+t[0],this.attr.apply(this,t)):this},prop:function(){var t=e.slice(arguments);return t.length?1===t.length?e[e.has(E,t[0])?"isString":"cool"](this.attr(t[0])):t[1]!==!1&&0!==t[1]?this.attr(t[0],e.has(E,t[0])?"":t[1]):this.removeAttr(t[0]):this},removeProp:function(e){return this.removeAttr(e)},value:function(t){if(e.slice(arguments).length)return this.each(function(n){var i=n.tagName.toUpperCase();"SELECT"===i?e.foreach(e.slice(n.options),function(e){e.removeAttribute("selected"),(e.getAttribute("value")||e.innerText)===t+""&&e.setAttribute("selected","")}):n.setAttribute("value",t)});var n=this.get(0);return"SELECT"===n.tagName.toUpperCase()?n.options[n.selectedIndex].value||n.innerText:n.value||n.getAttribute("value")},text:function(t){return null!=t?this.each(function(e){e.innerText=t+""}):e.decodeHTML(this.get(0).innerText||"")},fill:function(t){if(null!=t){var n="";return t.nodeType&&1===t.nodeType?n=t.outerHTML:e.isObject(t)&&t instanceof L?t.each(function(e){n+=e.outerHTML}):n=t+"",this.each(function(e){null!=e&&(e.innerHTML=n+"")})}var i=this.get(0);return null!=i.innerHTML?i.innerHTML:""},html:function(){return this.fill.apply(this,e.slice(arguments))},replacewith:function(e){var t=d(e);return this.each(function(e){t.each(function(t){e.parentNode.insertBefore(t,e)}),e.parentNode.removeChild(e)}),t},insertbefore:function(e){var t=d(e);return this.each(function(e){t.each(function(t){e.parentNode.insertBefore(t,e)})})},insertafter:function(e){var t=d(e);return this.each(function(e){t.each(function(t){var n=c(e);null!=n?e.parentNode.insertBefore(t,n):e.parentNode.appendChild(t)})})},append:function(e){var t=d(e);return this.each(function(e){t.each(function(t){e.appendChild(t)})})},remove:function(){return this.off().each(function(e){e.parentNode.removeChild(e)}),this.$el=[],this.length=0,this},empty:function(){return this.each(function(e){e.innerHTML=""})},offset:function(){var e=0,t=0,n=0,i=0,r=this.get(0);for(n=r.offsetWidth,i=r.offsetHeight;r;)t+=r.offsetLeft,e+=r.offsetTop,r=r.offsetParent;return{top:e,left:t,witdh:n,height:i}},pos:function(){var e=this.get(0);return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}},draw:function(t,n){if(e.isString(t))return null==n?o(window.getComputedStyle(this.get(0),null)[t]):this.each(function(e){e.style[a(t)]=(n||"")+""});if(e.isObject(t))for(var i in t)this.draw(i,t[i]);return this},css:function(){return this.draw.apply(this,e.slice(arguments))},redraw:function(){return this.removeAttr("style")}});var S={};return S.Events=function(t,n){for(var i in t)e.isFunction(t[i])||i===i.toUpperCase()||(this[i]=t[i]);this.data=n.data,e.define(this,"_event",{value:t,writable:!1,enumerable:!1,configurable:!0})},S.Events.consoda=["stopImmediatePropagation","stopPropagation","preventDefault"],S.Events.consoda.forEach(function(e){S.Events.prototype[e]=function(){return this._event[e]()}}),d.fn.extend({reg:function(t,n,i,r,o){return e.isFunction(n)&&(o=r,r=i,i=n,n=null),this.each(function(a){if(null==a._events&&e.define(a,"_events",{value:{},writable:!0,enumerable:!1,configurable:!0}),null!=i){var s=function(e){var o=u(a,t,n,e);i.call(r||a,o,t,r)};s.fn=i.fn||i,s.cal=i,null==a._events[t]&&(a._events[t]=[]),a._events[t].push(s),a.addEventListener(t,s,!!o)}})},purge:function(t,n){return this.each(function(i){e.isString(t)?null!=n?(null!=i._events[t]?(i.removeEventListener(t,e.cat(i._events[t],function(e){return e.fn===n})[0]||n),i._events[t].length||delete i._events[t]):i.removeEventListener(t,n),null!=i._events["_"+t]&&(document.documentElement.removeEventListener(t,e.cat(i._events["_"+t],function(e){return e.fn===n})[0].cal,!0),i._events["_"+t].length||delete i._events["_"+t])):(e.foreach(i._events[t],function(e){i.removeEventListener(t,e)}),e.foreach(i._events["_"+t],function(e){document.documentElement.removeEventListener(t,e.cal,!0)}),delete i._events["_"+t],delete i._events[t]):(e.foreach(i._events,function(t,n){n.search("_")!=-1?e.foreach(t,function(e){document.removeEventListener(n.slice(1),e.cal,!0)}):e.foreach(t,function(e){i.removeEventListener(n,e)})}),i._events={})})},off:function(e,t,n){return this.purge(e,n)},on:function(){return this.live.apply(this,e.slice(arguments))},live:function(t,n,i,r,o){var a,s=!e.isFunction(n);return e.isFunction(i)||(a=i,i=e.isFunction(r)?r:e.NULL,r=o),this.each(function(o){if(s){var c=function(s){var c=s.target||s.toElement;if(e.has(d(o).find(n).$el,c))return i.call(r||c,u(c,t,a,s),t)};c.fn=i,c.elm=o,d(o).reg("_"+t,c,null),document.documentElement.addEventListener(t,c,!0)}else d(o).reg(t,n,i)})},signet:function(t,n){return null!=t?null!=n?this.each(function(i){i[t]?i.name=n:e.define(i,t,{value:n,writable:!0,enumerable:!1,configurable:!0})}):this.get(0)[t]:this},once:function(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=null),this.each(function(e){var r=function(o){i.call(e,u(e,t,n,o),t),e.removeEventListener(t,r),r=null};e.addEventListener(t,r)})},dispatch:function(t,n){return this.each(function(i){var r=u(i,t);return e.isFunction(n)?n.call(i,r):i.dispatchEvent(r)})}}),d}),function(e,t){"function"==typeof define&&define.amd?define(["_","__"],t):e.aix=t(_,__)}(this,function(_,$){"use strict";function _genertor_(e){return function(){var t=_.clonedoom(this.data),n=[t].concat(_.slice(arguments));return t=_[e].apply(t,n),_.isequal(t,this.data)||(this.data=t,this.dispatch(e,null,n)),this}}function _genertor_$(e){return function(){var t=_.clonedoom(this.data),n=[t].concat(_.slice(arguments));return _[e].apply(t,n)}}function _genertor__(e){return function(){var t=_.clonedoom(this.data),n=[t].concat(_.slice(arguments)),i=_[e].apply(t,n);return _.isequal(t,this.data)||(this.data=t,this.dispatch(e,null,n)),i}}function hackaix(e,t){var n=e.toString(),i=e.toString().replace(strip_comment,""),r=t.toString().replace(strip_comment,""),o=n.slice(n.indexOf("{")+1,n.lastIndexOf("}"));return i=i.slice(i.indexOf("(")+1,i.indexOf(")")).match(/([^\s,]+)/g)[0],r=r.slice(r.indexOf("(")+1,r.indexOf(")")).match(/([^\s,]+)/g)[0],[i||"",r||"",o]}function changeHash(e,t,n){_.foreach(this.routes,function(i,r){RegExp(r,"i").test(e)&&changeHashReg.call(this,i,[n,e,t,r])},this)}function changeHashReg(e,t){switch(_.typeof(e)){case"function":e.apply(this||_.root,t);break;default:_.foreach(_.isString(e)?e.split(","):e,function(e){this.action[e].apply(this||_.root,t)},this)}}var aix={},AIX_VIEW_COUNT=0,AIX_MODELS_COUNT=0,AIX_COLLECTION_COUNT=0,AIX_VIEW_DEFAULT={el:"",template:""},AIX_ROUTE_DEFAULT={routes:{},action:{}},AIX_MODELS_DEFAULT={data:""},AIX_COLLECTION_DEFAULT={data:[],model:0},RESTFUL_enable={get:"GET",put:"PUT",post:"POST",pull:"PULL",fetch:"FETCH",update:"UPDATE",delete:"DELETE"},RESTFUL_disable={get:"GET",put:"POST",post:"POST",pull:"POST",fetch:"GET",update:"POST",delete:"POST"},RESTFUL_LIST=RESTFUL_disable;aix.aixpref=function(){return{count:{views:AIX_VIEW_COUNT,models:AIX_MODELS_COUNT,collections:AIX_COLLECTION_COUNT}}},aix.config={restful:!1},_.watch(aix.config,"restful",function(e){return RESTFUL_LIST=e?RESTFUL_enable:RESTFUL_disable,e});var strip_comment=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;aix.model=function(e){var t=this;_.define(this,{aid:{value:"#"+ ++AIX_MODELS_COUNT,writable:!0,enumerable:!1},change:{value:!1,writable:!0,enumerable:!1}}),_.isObject(e.events)&&_.foreach(e.events,function(e,n){_.addEvent(t,n,e)}),_.isFunction(e.validate)&&_.define(t,"validate",{value:e.validate,writable:!1,enumerable:!1,configurable:!1}),delete e.validate,delete e.change,delete e.events,_.extend(t,_.extend(_.clone(AIX_MODELS_DEFAULT),e)),_.watch(t,"data",function(e,n){if(_.isFunction(t.validate)){var i=!0;return(_.isFunction(t.validate)?!t.validate.call(t,e):0)&&(i=!1),i?(_.isequal(e,n)||(_.dispatch(t,"change",null,[e,n]),t.change=!0),_.dispatch(t,"validate",null,[e,n]),_.dispatch(t,"validate:success",null,[e,n]),e):(_.dispatch(t,"validate",null,[e,n]),_.dispatch(t,"validate:fail",null,[e,n]),n)}return _.isequal(e,n)||(_.dispatch(t,"change",null,[e,n]),t.change=!0),e}),_.dispatch(t,"init")},aix.model.extend=function(def){var x=hackaix(aix.model,aix.model.extend),extend=eval("(function(ops){ var "+x[0]+"=_.extend(_.extend({},"+x[1]+"),ops||{}); "+x[2]+"})");return _.compose(extend.prototype,aix.model.prototype),extend.prototype.constructor=extend,_.define(extend,"base",{value:aix.model,writable:!1,enumerable:!1,configurable:!1}),
extend},aix.model.prototype={constructor:aix.model,get:function(e){return _.isString(e)||_.isNumber(e)?_.clone(this.data[e]||""):_.clone(this.data)},set:function(){var e=_.slice(arguments);return e.length>1?this.data[e[0]]=e[1]:this.data=e[0],this},addEvent:function(e,t){return _.isFunction(t)&&_.addEvent(this,e,t),this},removeEvent:function(e,t){return _.removeEvent(this,e,t)},dispatch:function(e,t,n){return _.dispatch(this,e,_.isFunction(t)?t:null,n)},trigger:function(e,t,n){return this.dispatch(e,t,n)},listen:function(e,t){return _.isObject(this.data)&&_.watch(this.data,e,t),this},unlisten:function(e){return _.isObject(this.data)&&_.unwatch(this.data,e),this},add:function(){var e=_.slice(arguments),t=_.clonedoom(this.data),n=_.typeof(t);return _.foreach(e,function(e){switch(n){case"number":t+=_.isNumber(+e)?+e:0;break;case"string":t+=e.toString();break;case"array":t=t.concat(e);break;case"object":_.isObject(e)&&_.extend(t,e)}}),this.data=t,this.dispatch("add",null,e)},rev:function(){var e=_.slice(arguments),t=_.clonedoom(this.data),n=_.typeof(t);return _.foreach(e,function(e){switch(n){case"array":_.isArray(e)?_.foreach(e,function(e){_.not(t,e)}):_.not(t,e);break;case"object":_.isArray(e)?_.foreach(e,function(e){delete t[e]}):delete t[e]}}),this.data=t,this.dispatch("remove",null,e)}},aix.collection=function(e){var t=this;_.define(t,{cid:{value:"#"+ ++AIX_COLLECTION_COUNT,writable:!0,enumerable:!1},change:{value:!1,writable:!0,enumerable:!1}}),_.isObject(e.events)&&_.foreach(e.events,function(e,n){_.addEvent(t,n,e)}),_.isFunction(e.validate)&&_.define(t,"validate",{value:e.validate,writable:!1,enumerable:!1,configurable:!1}),delete e.validate,delete e.change,delete e.events,_.extend(t,_.extend(_.clone(AIX_COLLECTION_DEFAULT),e)),t.model&&(t.data=_.filter(t.data,function(e){return e.constructor===t.model})),_.watch(t,"data",function(e,n){if(_.isArray(e)||(e=[e]),_.isFunction(t.validate)){var i=!0;return _.foreach(e,function(e){(t.model?e.constructor!==t.model:0)&&(i=!1),(_.isFunction(t.validate)?!t.validate.call(t,e):0)&&(i=!1)}),i?(_.isequal(e,n)||(_.dispatch(t,"change",null,[e,n]),t.change=!0),_.dispatch(t,"validate",null,[e,n]),_.dispatch(t,"validate:success",null,[e,n]),e):(_.dispatch(t,"validate",null,[e,n]),_.dispatch(t,"validate:fail",null,[e,n]),n)}return _.isequal(e,n)||(_.dispatch(t,"change",null,[e,n]),t.change=!0),e}),_.dispatch(t,"init")},aix.collection.extend=function(def){var x=hackaix(aix.collection,aix.collection.extend),extend=eval("(function(ops){ var "+x[0]+"=_.extend(_.extend({},"+x[1]+"),ops||{}); "+x[2]+"})");return _.compose(extend.prototype,aix.collection.prototype),extend.prototype.constructor=extend,_.define(extend,"base",{value:aix.collection,writable:!1,enumerable:!1,configurable:!1}),extend},aix.collection.prototype={constructor:aix.collection,addEvent:function(e,t){return _.isFunction(t)&&_.addEvent(this,e,t),this},removeEvent:function(e,t){return _.removeEvent(this,e,t)},listen:function(e,t){return _.isObject(this.data)&&_.watch(this.data,e,t),this},unlisten:function(e){return _.isObject(this.data)&&_.unwatch(this.data,e),this},add:function(){var e=this.data.length,t=_.slice(arguments),n=_.slice(this.data);return t.length&&(n=n.concat.apply(n,t)),_.isequal(this.data,n)?this:(this.data=n,this.data.length===e?this:this.dispatch("add",null,t))},rev:function(e){var t,n=this.data.length;return _.isString(e)?(t=_.slice(this.data),t=_.cat(t,function(t){return t.aid!=="#"+e})):_.isObject(e)&&(_.isFunction(this.model)?e instanceof this.model&&(t=_.slice(this.data),t=_.not(t,e)):(t=_.slice(this.data),t=_.not(t,e))),t?(this.data=t,this.data.length===n?this:this.dispatch("remove",null,[e])):this},get:function(e){return _.isString(e)||_.isNumber(e)?_.filter(this.data,function(t){return t.aid==="#"+e}):_.slice(this.data)},set:function(e){return this.data=_.isArray(e)?e:[e],this},dispatch:function(e,t,n){return _.dispatch(this,e,_.isFunction(t)?t:null,n)},trigger:function(e,t,n){return this.dispatch(e,t,n)}},_.foreach(["loop","foreach","splice","push","unshift","sort","unique","reject","find","filter","map","cat","groupby","toarray","forarray","pairs","not","hook","bale","pluck","reverse","shuffle","merge","compose"],function(e){aix.model.prototype[e]=_genertor_(e),aix.collection.prototype[e]=_genertor_(e)}),_.foreach(["keys","clone","contain","findindex","has","isequal","requery","typeof","combom"],function(e){aix.model.prototype[e]=_genertor_$(e),aix.collection.prototype[e]=_genertor_$(e)}),_.foreach(["pop","shift"],function(e){aix.model.prototype[e]=_genertor__(e),aix.collection.prototype[e]=_genertor__(e)}),_.extend(aix.model.prototype,{toJSON:function(){return _.isArray(this.data)||_.isObject(this.data)?JSON.stringify(this.data):this.data},parse:function(){return _.isString(this.data)?JSON.parse(this.data):_.clone(this.data)},pipe:function(e,t,n,i,r){var o,a,s=this,c={type:RESTFUL_LIST[e.toLowerCase()],aysnc:!0},u=_.isFunction(n);_.isString(t)?(c.url=t,c.param=u?{}:n||{},o=u?n:i||_.NULL,a=u?i||_.NULL:r||_.NULL):_.isObject(t)?(c.url=s.url||"/",c.param=u?t:n||{},o=u?n:i||_.NULL,a=u?i||_.NULL:r||_.NULL):(c.url=s.url||"/",o=_.NULL,a=_.NULL),c.success=function(t,n,i){o.call(s,t,n,i),s.dispatch(e+":success",null,[t,n,i])},c.fail=function(t,n){a.call(s,t,n),s.dispatch(e+":fail",null,[t,n])};var l=_.aix(c);return this.dispatch(e,null,[l])},aget:function(e,t,n,i){return n=_.isFunction(n)?n:_.NULL,i=_.isFunction(i)?i:_.NULL,this.pipe.apply(this,["get",e||this.url||"",t,n,i])},fetch:function(e,t,n){return t=_.isFunction(t)?t:_.NULL,n=_.isFunction(n)?n:_.NULL,this.pipe.apply(this,["fetch",this.url||"",e,function(e,n,i){this.data=JSON.parse(e),t.call(this,e,n,i)},n])},pull:function(){return this.fetch.apply(this,_.slice(arguments))},post:function(e,t,n,i){return n=_.isFunction(n)?n:_.NULL,i=_.isFunction(i)?i:_.NULL,this.pipe.apply(this,["post",e||this.url||"",t||this.parse(),n,i])}}),_.extend(aix.collection.prototype,{toJSON:function(){var e=[];return _.foreach(this.data,function(t){e.push(t.get?t.get():t)}),JSON.stringify(e)},parse:function(){return JSON.parse(this.toJSON())},pipe:function(e,t,n,i,r){var o,a,s=this,c={type:RESTFUL_LIST[e.toLowerCase()],aysnc:!0},u=_.isFunction(n);_.isString(t)?(c.url=t,c.param=u?{}:n||{},o=u?n:i||_.NULL,a=u?i||_.NULL:r||_.NULL):_.isObject(t)?(c.url=s.url||"/",c.param=u?t:n||{},o=u?n:i||_.NULL,a=u?i||_.NULL:r||_.NULL):(c.url=s.url||"/",o=_.NULL,a=_.NULL),c.success=function(t,n,i){o.call(s,t,n,i),s.dispatch(e+":success",null,[t,n,i])},c.fail=function(t,n){a.call(s,t,n),s.dispatch(e+":fail",null,[t,n])};var l=_.aix(c);return this.dispatch(e,null,[l])},aget:function(e,t,n,i){return n=_.isFunction(n)?n:_.NULL,i=_.isFunction(i)?i:_.NULL,this.pipe.apply(this,["get",e||this.url||"",t,n,i])},fetch:function(e,t,n){return t=_.isFunction(t)?t:_.NULL,n=_.isFunction(n)?n:_.NULL,this.pipe.apply(this,["fetch",this.url||"",e,function(e,n,i){var r=JSON.parse(e);this.model&&_.foreach(r,function(e,t){r[t]=new this.model({data:e})},this),this.data=r,t.call(this,e,n,i)},n])},pull:function(){return this.fetch.apply(this,_.slice(arguments))},post:function(e,t,n,i){return n=_.isFunction(n)?n:_.NULL,i=_.isFunction(i)?i:_.NULL,this.pipe.apply(this,["post",e||this.url||"",t||this.parse(),n,i])}}),$=$||_.NULL,aix.view=function(e){if(e=e||{},!_.isString(e.el))return console.error("view must define its 'el' prop bind with elm (custom string)");var t=this;return _.define(t,{vid:{value:"#"+ ++AIX_VIEW_COUNT,writable:!0,enumerable:!1}}),_.isObject(e.events)&&_.foreach(e.events,function(n,i){var r=i.split(":");r.length>1?$(e.el).on(r[0],r[1],{self:t},n):_.addEvent(t,i,n)}),e.template&&!_.isString(e.template)||(e.template=_.isFunction(e.build)?e.build.call(t,e.template||""):_.doom(e.template||"")),e.render&&_.isFunction(e.render)||(e.render=function(e){return $(this.el).html(this.template(e))&&this}),delete e.change,delete e.events,_.isString(e.url)?(_.aix({url:e.url,cache:!_.isBoolean(e.cache)||e.cache,success:function(n){e.template=_.isFunction(e.build)?e.build.call(t,n):_.doom(n),_.extend(t,_.extend(_.clone(AIX_VIEW_DEFAULT),e)),_.dispatch(t,"init")},fail:function(t){console.error("Fetch template url->["+e.url+"] has fail!"),console.log(t)}}),this):(_.extend(t,_.extend(_.clone(AIX_VIEW_DEFAULT),e)),void _.dispatch(t,"init"))},aix.view.extend=function(def){var x=hackaix(aix.view,aix.view.extend),extend=eval("(function(ops){ var "+x[0]+"=_.extend(_.extend({},"+x[1]+"),ops||{}); "+x[2]+"})");return _.compose(extend.prototype,aix.view.prototype),extend.prototype.constructor=extend,_.define(extend,"base",{value:aix.view,writable:!1,enumerable:!1,configurable:!1}),extend},aix.view.prototype={addEvent:function(e,t){var n=e.split(":");return n.length>1?$(this.el).on(n[0],n[1],{self:this},t):_.addEvent(this,e,t),this},removeEvent:function(e,t){var n=e.split(":");n.length>1?$(this.el).off(n[0],n[1],t):_.removeEvent(this,e,t)},dispatch:function(e,t,n){return _.dispatch(this,e,_.isFunction(t)?t:null,n)}};var getHash=aix.getHash=function(e){var t=e.search("#");return t>0?e.slice(t+1):""};return aix.route=function(e){e=e||{};var t=this;this.storage=_.root.localStorage||{},_.isObject(e.events)&&_.foreach(e.events,function(e,n){_.addEvent(t,n,e)}),delete e.events,_.extend(this,_.extend(_.clone(AIX_ROUTE_DEFAULT),e)),_.addEvent(this,"hashchange",changeHash),_.define(this,{history:{value:{old:"",now:_.root.location.href},writable:!0,enumerable:!1},rid:{value:"aix-route-"+Math.random(),writable:!1,enumerable:!1,configurable:!1},event:{value:function(e){return _.root.location.href===t.history.now?e.preventDefault():(t.history.old=t.history.now,t.history.now=_.root.location.href,_.dispatch(t,"hashchange",null,[getHash(_.root.location.href),getHash(t.history.old),e]))},writable:!1,enumerable:!1,configurable:!1}}),_.dispatch(t,"init")},aix.route.extend=function(def){var x=hackaix(aix.route,aix.route.extend),extend=eval("(function(ops){ var "+x[0]+"=_.extend(_.extend({},"+x[1]+"),ops||{}); "+x[2]+"})");return _.compose(extend.prototype,aix.route.prototype),extend.prototype.constructor=extend,_.define(extend,"base",{value:aix.route,writable:!1,enumerable:!1,configurable:!1}),extend},aix.route.prototype={constructor:aix.route,dispatch:function(e,t,n){return _.dispatch(this,e,t,n)},listen:function(){return this.$listen||(_.define(this,"$listen",{value:1,writable:!1,enumerable:!1,configurable:!0}),_.root.addEventListener("hashchange",this.event),this.dispatch("listen"),this.dispatch("hashchange",null,[getHash(window.location.href)])),this},stop:function(){return delete this.$listen&&(_.root.removeEventListener("hashchange",this.event),this.dispatch("stop")),this},assign:function(e){if(this.$listen){var t=_.root.location.href,n=t.search("#");n>0&&(t=t.slice(0,n)),_.root.location.href=t+("#"===e.slice(0,1)?"":"#")+e}return this},addhash:function(e){var t=_.root.location.href+(e||"");return t!==_.root.location.href&&(_.root.location.href=t),this},save:function(){return this.storage.setItem(this.rid,JSON.stringify(this.history)),this}},aix});